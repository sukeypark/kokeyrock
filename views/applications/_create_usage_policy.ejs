<!-- Form to create permission -->
<div id="create_usage_policy_modal" class="modal fade" style="top: 0px; display: none;" aria-hidden="false">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<a class="close" data-dismiss="modal">Ã—</a>
				<h3>
				</h3><h3>Create data usage policy</h3>  
			</div>
			<form id="create_usage_policy_form" ng-controller="DummyCtrl" name="" autocomplete="off" class="" action="/idm/applications/<%= application.id %>/edit/usage_policies" method="POST" enctype="">
				<input type='hidden' name='_csrf' value='<%= csrf_token%>' />
				<div class="modal-body clearfix">
					<span id="xml_with_action_and_resource_not_allow" style="display: none;" class='help-block alert alert-danger'>If you use the advanced rule you cannot set also action and resource.</span>
						<span id="define_rule" style="display: none;" class='help-block alert alert-danger'>You need to define both action and resource or an advanced XACML Rule.</span>
					<fieldset>
						<div class="form-group required">
							<label class="control-label  required" for="id_name">Policy Name</label>
							<div class=" ">
								<input class="form-control" id="id_name" maxlength="255" name="name" type="text">
							</div>
						</div>
						<span id="error_empty_name" style="display: none;" class='help-block alert alert-danger'>Input required.</span>

						<div class="form-group required">
							<label class="control-label  required" for="id_description">Description</label>
							<div class=" ">
								<input class="form-control" id="id_description" name="description" type="text">
							</div>
						</div>
						<span id="error_empty_description" style="display: none;" class='help-block alert alert-danger'>Input required.</span>

						<div class="panel-group" id="accordion">
							<div class="panel">
								<div class="panel-headding">
									<a data-toggle="collapse" data-parent="#accordion" class="panel-heading collapsed">
										<h4 class="panel-title panel-close">
											ODRL Default Policy
										</h4>
									</a>
								</div>
								<div id="collapse-default-policy" class="panel-collapse collapsed collapse in">
									<div class="form-group required">
				                        <label class="control-label  required" for="type">
				                            Type
				                        </label>
				                        <div class="select-multiple">
				                            <select id="type" title="Nothing selected" name="type" class="selectpicker" data-dropup-auto="false">
				                                <option value="COUNT_POLICY">Count</option>
				                                <option value="AGGREGATION_POLICY">Aggregation</option>
				                                <option value="CUSTOM_POLICY">Custom</option>
				                            </select>
				                        </div>
				                    </div>
				                    <span id="error_empty_type" style="display: none;" class='help-block alert alert-danger'>Type required.</span>

				                    <div id="parameters" class="form-group required" hidden>
				                        <label class="control-label  required">
				                            Parameters
				                        </label>
				                    </div>
				                    <span id="error_invalid_parameter" style="display: none;" class='help-block alert alert-danger'>Invalid paramter.</span>

				                    <div id="max_number" class="form-group required parameter" hidden>
				                        <label class="control-label  required" for="policy_type">
				                            Maximum Number of Events
				                        </label>
				                        <div class="time">
											<input class="form-control" id="id_max_number_events" name="parameters[max_number_events[value]]" type="number">
										</div>
				                    </div>
				                    

				                    <div id="event_window" class="form-group required parameter" hidden>
				                        <label class="control-label  required" for="policy_type">
				                            Event Window
				                        </label>
				                        <div class="time">
											<input class="form-control" id="id_event_window" name="parameters[event_window[value]]" type="number">
											<div class="select-multiple">
					                            <select name="parameters[event_window[unit]]" class="selectpicker" data-dropup-auto="false">
					                                <option value="SECONDS">seconds</option>
					                                <option value="MINUTES">minutes</option>
					                                <option value="HOURS">hours</option>
					                                <option value="DAYS">days</option>
					                            </select>
					                        </div>
										</div>
				                    </div>

				                    <div id="aggregate_time" class="form-group required parameter" hidden>
				                        <label class="control-label required" for="policy_type">
				                            Aggregation Time
				                        </label>
				                        <div class="time">
											<input class="form-control" id="id_aggregate_time" name="parameters[aggregate_time[value]]" type="number">
											<div class="select-multiple">
					                            <select name="parameters[aggregate_time[unit]]" class="selectpicker" data-dropup-auto="false">
					                            	<option value="SECONDS">seconds</option>
					                                <option value="MINUTES">minutes</option>
					                                <option value="HOURS">hours</option>
					                                <option value="DAYS">days</option>
					                            </select>
					                        </div>
										</div>
				                    </div>

				                    <div id="punishment" class="form-group required" hidden>
				                        <label class="control-label required" for="punishment">
				                            Punishment
				                        </label>
				                        <div class="select-multiple">
				                            <select id="punishment" name="punishment" title="Nothing selected" class="selectpicker" data-dropup-auto="false">
				                                <option value="KILL_JOB">Kill job</option>
				                                <option value="UNSUBSCRIBE">Unsubscribe</option>
				                                <option value="MONETIZE">Monetize</option>
				                            </select>
				                        </div>
				                    </div>
				                    <span id="error_invalid_punishment" style="display: none;" class='help-block alert alert-danger'>Input required.</span>

				                    <div id="time_lapse" class="form-group required parameter" hidden>
				                        <label class="control-label  required" for="time_lapse">
				                            Time Lapse
				                        </label>
				                        <div class="time_lapse">
											<input class="form-control timepicker" id="id_time_from" name="from" type="text">
											<span>to</span>
											<input class="form-control timepicker" id="id_time_to" name="to" type="text">
										</div>
				                    </div>

				                    <div id="custom" class="form-group required parameter" hidden>
				                        <label class="control-label  required" for="time_lapse">
				                            Here you can define the Data Usage Policy.
				                        </label>
				                        <div class="form-group ">
											<div class=" ">
												<textarea class="form-control" cols="40" id="id_odrl" name="odrl" rows="10"></textarea>
											</div>
										</div>
				                    </div>
				                    <span id="error_invalid_custom" style="display: none;" class='help-block alert alert-danger'>Input required.</span>
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<div class="modal-footer">
					<input class="btn btn-primary pull-right " type="submit" name="" value="Save">
				</div>
			</form>
		</div>
	</div>
</div>